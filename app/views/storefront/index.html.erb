<!-- ***************** -->
<!-- search bar        -->
<!-- ***************** -->
<span class="pull-right">
  <%= form_tag(shop_path, method: :get, role: "search", class: "form-inline") do  %>
    <div class="form-group">
      <%# TODO: hide the search label %>
      <%# label_tag :search class: "sr-only" %>
      <%= text_field_tag(:search, nil, placheholder: "Search Products", class: "form-control input-sm") %>
    </div>
    <%= submit_tag(:search, class: "btn btn-default btn-sm", style: "margin-right:20px;" ) %>
  <% end %>
</span>

<h1>Welcome to the Stor-tastic!</h1>
<p>Where all of your awesome products dreams come true</p>

<% if params[:cat_id] %>
  <h3>
    <%= @category.name.capitalize %>
    </h3>
  <% else %>
    <h3>
      All Products
    </h3>
  </h3>
<% end %>


<div class="container-fluid">
  <div class="row">
    <div class="col-sm-6 col-md-8 col-lg-9 panel panel-default panel-body">

    <% @products.each do |product| %>
      <div class="col-xs-6 col-sm-4 col-md-2">
	<div class="">
	  <p>
	    <div class="text-center">
	      <br>
	      <br>
	      <a href="#" data-toggle="modal" data-target="#myModal_<%= product.id %>">
	      <%= image_tag product.avatar.url(:thumb) %>
	      <h4><%# number_to_currency(product.price) %></h4>
		<h4>
		      <%= product.name %>
		</h4>
	      </a>
	      <%= button_to "Add to cart", line_items_path(product_id: product), class: "btn btn-sm btn-success", remote: true %>
	      <br>
	      <br>
	    </div>
	  </p>
	</div>
      </div>


      <!-- Modal -->
      <div class="modal fade" id="myModal_<%= product.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
	    <div class="modal-header">
	      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	      <h4 class="modal-title" id="myModalLabel"><%= product.name %></h4>
	    </div>
	    <div class="modal-body">
	      <p>
	      <%= image_tag product.avatar.url(:medium) %>
	      </p>
	      <p>
	      <%= number_to_currency(product.price) %>
	      </p>
	      <p>
	      <%= product.description %>
	      </p>
	    </div>
	    <div class="modal-footer">
	      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      <%= button_to "Add to cart", line_items_path(product_id: product), class: "btn btn-sm btn-success", remote: true %>
	    </div>
	  </div>
	</div>
      </div>

    <% end %>

    </div> <!--end panel body -->
	    <%= render 'cart' %>
  </div>

</div>




